<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> | DevCraft</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'sans': ['Inter', 'sans-serif'],
              'poppins': ['Poppins', 'sans-serif'],
            },
            animation: {
              'float': 'float 3s ease-in-out infinite',
              'pulse': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'bounce': 'bounce 1s infinite',
              'spin-slow': 'spin 20s linear infinite',
              'scroll': 'scroll 30s linear infinite',
              'scroll-reverse': 'scroll-reverse 30s linear infinite',
              'blob': 'blob 7s infinite',
            },
            keyframes: {
              float: {
                '0%, 100%': { transform: 'translateY(0px)' },
                '50%': { transform: 'translateY(-20px)' },
              },
              scroll: {
                '0%': { transform: 'translateX(0)' },
                '100%': { transform: 'translateX(-50%)' },
              },
              'scroll-reverse': {
                '0%': { transform: 'translateX(-50%)' },
                '100%': { transform: 'translateX(0)' },
              },
              blob: {
                '0%': { borderRadius: '60% 40% 30% 70% / 60% 30% 70% 40%' },
                '50%': { borderRadius: '30% 60% 70% 40% / 50% 60% 30% 60%' },
                '100%': { borderRadius: '60% 40% 30% 70% / 60% 30% 70% 40%' },
              },
            },
            backgroundImage: {
              'gradient-purple-blue': 'linear-gradient(135deg, #6e8efb, #a777e3)',
              'gradient-blue-teal': 'linear-gradient(135deg, #2193b0, #6dd5ed)',
              'gradient-orange-red': 'linear-gradient(135deg, #ff8008, #fd2c72)',
              'gradient-green-blue': 'linear-gradient(135deg, #11998e, #38ef7d)',
              'gradient-pink-orange': 'linear-gradient(135deg, #ee0979, #ff6a00)',
              'gradient-purple-pink': 'linear-gradient(135deg, #8e2de2, #e94057)',
            },
          },
        },
      }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <% if (typeof includeChart !== 'undefined' && includeChart) { %>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <% } %>
    <link rel="stylesheet" href="/css/unified.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

</head>
<body class="bg-gray-100 font-sans">
    <% if (typeof showHeader !== 'undefined' && showHeader) { %>
        <%- include('partials/header') %>
    <% } %>

    <% if (typeof showSidebar !== 'undefined' && showSidebar) { %>
        <%- include('partials/sidebar') %>
        <div class="main-content main-content-expanded ml-64 min-h-screen">
            <%- include('partials/dashboard-header') %>
            <div class="p-6">
                <%- body %>
            </div>
        </div>
    <% } else { %>
        <div class="min-h-screen">
            <%- body %>
        </div>
    <% } %>

    <% if (typeof showFooter !== 'undefined' && showFooter) { %>
        <%- include('partials/footer') %>
    <% } %>

    <script src="/js/main.js"></script>
    <script src="/js/animations.js"></script>
    <script src="/js/debug.js"></script>
    <script>
        // Initialize animations when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing animations...');

            // Initialize scroll reveal animations
            try {
                if (typeof window.DevCraftAnimations !== 'undefined' && typeof window.DevCraftAnimations.initScrollReveal === 'function') {
                    console.log('Initializing scroll reveal...');
                    window.DevCraftAnimations.initScrollReveal();
                } else if (typeof initScrollReveal === 'function') {
                    console.log('Initializing scroll reveal (global)...');
                    initScrollReveal();
                }
            } catch (e) {
                console.error('Error initializing scroll reveal:', e);
            }

            // Initialize particle animation
            try {
                if (typeof window.DevCraftAnimations !== 'undefined' && typeof window.DevCraftAnimations.initParticles === 'function') {
                    console.log('Initializing particles...');
                    window.DevCraftAnimations.initParticles();
                } else if (typeof initParticles === 'function') {
                    console.log('Initializing particles (global)...');
                    initParticles();
                }
            } catch (e) {
                console.error('Error initializing particles:', e);
            }

            // Initialize counters
            try {
                if (typeof window.DevCraftAnimations !== 'undefined' && typeof window.DevCraftAnimations.initCounters === 'function') {
                    console.log('Initializing counters...');
                    window.DevCraftAnimations.initCounters();
                } else if (typeof initCounters === 'function') {
                    console.log('Initializing counters (global)...');
                    initCounters();
                }
            } catch (e) {
                console.error('Error initializing counters:', e);
            }

            // Initialize staggered animations
            try {
                if (typeof window.DevCraftAnimations !== 'undefined' && typeof window.DevCraftAnimations.initStaggeredAnimations === 'function') {
                    console.log('Initializing staggered animations...');
                    window.DevCraftAnimations.initStaggeredAnimations();
                } else if (typeof initStaggeredAnimations === 'function') {
                    console.log('Initializing staggered animations (global)...');
                    initStaggeredAnimations();
                }
            } catch (e) {
                console.error('Error initializing staggered animations:', e);
            }

            // Initialize FAQ accordions
            try {
                if (typeof window.DevCraftAnimations !== 'undefined' && typeof window.DevCraftAnimations.initFaqAccordions === 'function') {
                    console.log('Initializing FAQ accordions...');
                    window.DevCraftAnimations.initFaqAccordions();
                } else {
                    console.log('Initializing FAQ accordions (manual)...');
                    const faqToggles = document.querySelectorAll('.faq-toggle');
                    if (faqToggles.length > 0) {
                        faqToggles.forEach(toggle => {
                            toggle.addEventListener('click', function() {
                                const content = this.nextElementSibling;
                                const icon = this.querySelector('i');
                                content.classList.toggle('hidden');
                                icon.classList.toggle('transform');
                                icon.classList.toggle('rotate-180');
                            });
                        });
                    }
                }
            } catch (e) {
                console.error('Error initializing FAQ accordions:', e);
            }

            // Manually activate reveal elements if needed
            setTimeout(function() {
                const revealElements = document.querySelectorAll('.reveal');
                if (revealElements.length > 0) {
                    console.log('Manually activating reveal elements...');
                    revealElements.forEach(element => {
                        element.classList.add('active');
                    });
                }
            }, 500);
        });
    </script>

</body>
</html>
